<div #sidebar class="sidebar    fixed left-0 top-0 h-full w-20 py-1.5 px-3.5 z-[99]" [ngClass]="{
  'open': !configS.sidebar.collapsed
}">

  <div class="logo-details    flex items-center relative h-[60px]">
    <i class='bx bxl-c-plus-plus icon    text-center text-[28px] text-white rounded-xl min-w-[50px] h-[60px]'></i>
    <div class="logo_name    text-white font-semibold text-[20px]">
      {{configS.sidebar.title}}
    </div>
    <i #btn
      class='    absolute top-1/2 right-0 text-center cursor-pointer text-[22px] text-white min-w-[50px] h-[60px] bx'
      [ngClass]="{
      'bx-menu-alt-right': sidebar.classList.contains('open'),
      'bx-menu': !sidebar.classList.contains('open')
    }" id="btn" (click)="onToggleSidebar()" (keypress)="null"></i>
  </div>

  <ul class="nav-list    mt-5 h-full">

    @if (configS.sidebar.search) {
    <li class="    relative my-2 mx-0 list-none">
      <i class='bx bx-search    absolute top-1/2 left-0 text-center text-[22px] bg-[#1d1b31] hover:bg-white text-white hover:text-[#1d1b31] rounded-xl min-w-[50px] h-[60px]'
        (click)="onToggleSidebar()" (keypress)="$event.preventDefault()"></i>
      <input
        class="    text-white bg-[#1d1b31] font-normal text-[15px] w-full rounded-xl outline-none h-[50px] border-none"
        type="text" placeholder="Search...">
      <span
        class="tooltip    absolute -top-5 px-3 py-1.5 rounded font-normal opacity-0 whitespace-nowrap pointer-events-none bg-white text-[15px] z-[3] block max-xs:hidden">
        Search
      </span>
    </li>
    }

    @for (link of configS.sidebar.links; track $index) {
    <li class="    relative my-2 mx-0 list-none">
      <a class="    flex h-full w-full rounded-xl items-center no-underline bg-[#11101D] hover:bg-white"
        [routerLink]="link.url">
        <i class='    text-center text-[22px] text-white rounded-xl min-w-[50px] h-[60px] bx' [class]="link.icon"></i>
        <span class="links_name    font-normal text-[15px] text-white whitespace-normal opacity-0 pointer-events-none">
          {{link.displayName}}
        </span>
      </a>
      <span class="tooltip    absolute -top-5 bg-white px-3 py-1.5 rounded font-normal opacity-0 whitespace-nowrap pointer-events-none
        hover:opacity-1 hover:pointer-events-auto hover:top-1/2 block max-xs:hidden">
        {{link.name}}
      </span>
    </li>
    }

    @if (configS.sidebar.userInfo.visible) {
    <li class="profile    fixed left-0 -bottom-2 py-2.5 px-2.5 overflow-hidden my-2 mx-0 h-[60px]">
      <div class="profile-details    flex items-center flex-nowrap">
        <img class="    object-cover rounded-md mr-2.5 w-11 h-11" [src]="configS.sidebar.userInfo.avatar"
          alt="profileImg">
        <div class="name_job">
          <div class="name    font-normal whitespace-nowrap text-[12px] text-white">
            {{configS.sidebar.userInfo.username}}
          </div>
          <div class="job    font-normal whitespace-nowrap text-[10px] text-white">
            {{configS.sidebar.userInfo.role}}
          </div>
        </div>
      </div>
      <i class='bx bx-log-out    absolute top-1/2 right-0 w-full rounded-none text-center cursor-pointer text-white text-[20px] h-[60px] min-w-[50px]'
        id="log_out"></i>
    </li>
    }

  </ul>

</div>

<section #main class="main-section    relative min-h-screen top-0 z-[2]">

  <div #navbar class="flex items-center justify-end bg-content-light dark:bg-content-dark text-typography-default dark:text-typography-dark
       transition-all h-[65px] py-1.5 px-3.5">
    <div class="flex items-center justify-end gap-5">
      @if (configS.navbar.visibleDarkModeBtn) {
      <a id="sidenav-dark-mode-btn" (click)="onToggleDarkMode()">
        <i [ngClass]="{
            'bxs-moon': !configS.darkMode,
            'bxs-sun': configS.darkMode
          }"
          class='rounded-sm text-typography-default hover:text-black dark:text-typography-dark hover:dark:text-typography-light transition-all cursor-pointer bx'></i>
      </a>
      }
      @if (configS.navbar.notification.visible) {
      <div id="sidenav-notifications-btn" class="relative">
        <a (click)="onNotificationsClicked()">
          <i [ngClass]="{
              'bxs-bell-ring' : notificationsUnread > 0,
              'bxs-bell' : notificationsUnread === 0
              }"
            class='rounded-sm text-typography-default hover:text-black dark:text-typography-dark hover:dark:text-typography-light transition-all cursor-pointer bx'></i>
        </a>
        @if (notificationsUnread > 0) {
        <span
          class="absolute -top-2.5 -right-2.5 min-w-5 min-h-4 flex items-center justify-center text-[0.65rem] rounded-full bg-teal-500 text-typography-light">
          {{notificationsUnread > 0 && notificationsUnread < 10 ? notificationsUnread : '9+' }} </span>
            }
            <div [ngClass]="{
              'hidden': !notificationsClicked,
              'block': notificationsClicked,
              'w-[23rem] -right-40': isXSmallS(),
              'w-96 right-0': !isXSmallS()
            }"
              class="notificacion-content absolute z-10 mt-6 origin-top-right rounded-md bg-content-light dark:bg-content-dark py-1 shadow-lg focus:outline-none transition-all"
              role="menu" aria-orientation="vertical" aria-labelledby="notification-button" tabindex="-1">
              <div class="flex items-start">
                <span class="p-3 font-semibold">Notifications</span>
              </div>
              <hr class="text-typography-default">
              <div class="max-h-[500px] overflow-y-auto">
                @for (noti of notificationList; track $index) {
                <div (click)="markNotificationAsRead(noti)" (keypress)="null"
                  class="block px-4 py-3 text-typography-default dark:text-typography-dark hover:bg-typography-light hover:dark:bg-typography-default transition-all cursor-pointer"
                  role="menuitem">
                  <div class="flex items-center justify-center gap-3">
                    <i class='transition-all min-w-[35px] text-[25px] bx' [class]="noti.icon" [ngClass]="{
                        'text-teal-400 font-light' : noti.type === 'success',
                        'text-cyan-400 font-light' : noti.type === 'info',
                        'text-orange-400 font-light' : noti.type === 'warning',
                        'text-red-400 font-light' : noti.type === 'error',
                        'text-typography-default font-extralight opacity-40' : noti.read,
                      }"></i>
                    <div class="flex flex-col items-start">
                      <span class="text-sm font-semibold" [ngClass]="{
                          'opacity-40': noti.read
                        }">{{noti.title}}</span>
                      <p class="text-sm" [ngClass]="{
                          'opacity-40': noti.read
                        }">{{noti.description}}</p>
                    </div>
                  </div>
                </div>
                }
              </div>
            </div>
      </div>
      }
      @if (configS.navbar.userInfo.visible) {
      <div id="sidenav-user-btn" class="flex gap-3">
        <div class="flex flex-col items-end">
          <span
            class="text-typography-default dark:text-typography-dark text-sm font-semibold">{{configS.navbar.userInfo.username}}</span>
          <span
            class="text-typography-default dark:text-typography-dark text-xs font-light">{{configS.navbar.userInfo.role}}</span>
        </div>
        <div class="relative">
          <div>
            <button type="button" (click)="onUserAvatarClicked()"
              class="relative flex max-w-xs items-center rounded-full text-sm focus:outline-none" id="user-menu-button"
              aria-expanded="false" aria-haspopup="true">
              <span class="absolute -inset-1.5"></span>
              <span class="sr-only">Open user menu</span>
              <img class="h-8 w-8 rounded-full"
                [src]="configS.navbar.userInfo.avatar || 'https://placehold.co/32x32?text=I'" alt="avatar">
              <span class='rounded-[50%] absolute w-2.5 h-2.5 right-0 bottom-0 bg-green-500'></span>
            </button>
          </div>
          <div [ngClass]="{
              'hidden': !avatarClicked,
              'block': avatarClicked
            }"
            class="absolute right-0 z-10 mt-6 w-56 origin-top-right rounded-md bg-content-light dark:bg-content-dark py-1 shadow-lg focus:outline-none transition-all"
            role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
            <a routerLink="/profile"
              class="block px-4 py-2 text-sm text-typography-default dark:text-typography-dark hover:bg-typography-light hover:dark:bg-typography-default transition-all cursor-pointer"
              role="menuitem" tabindex="-1" id="user-menu-item-0">Your Profile</a>
            <a routerLink="/settings"
              class="block px-4 py-2 text-sm text-typography-default dark:text-typography-dark hover:bg-typography-light hover:dark:bg-typography-default transition-all cursor-pointer"
              role="menuitem" tabindex="-1" id="user-menu-item-1">Settings</a>
            <hr class="text-typography-light">
            <a routerLink="/auth/login"
              class="block px-4 py-2 text-sm text-typography-default dark:text-typography-dark hover:bg-typography-light hover:dark:bg-typography-default transition-all cursor-pointer"
              role="menuitem" tabindex="-1" id="user-menu-item-2">Sign out</a>
          </div>
        </div>
      </div>
      }
    </div>
  </div>

  <div #content class="bg-content-light dark:bg-content-dark"></div>


</section>
